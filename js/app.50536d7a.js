(function(t){function e(e){for(var n,r,h=e[0],l=e[1],a=e[2],d=0,u=[];d<h.length;d++)r=h[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(u.length)u.shift()();return o.push.apply(o,a||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,h=1;h<i.length;h++){var l=i[h];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},o=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/draw-rectangles-together/";var h=window["webpackJsonp"]=window["webpackJsonp"]||[],l=h.push.bind(h);h.push=e,h=h.slice();for(var a=0;a<h.length;a++)e(h[a]);var c=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"125c":function(t,e,i){"use strict";i("8f21")},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],r=(i("034f"),i("2877")),h={},l=Object(r["a"])(h,s,o,!1,null,null,null),a=l.exports,c=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("v-container",{attrs:{"fill-height":"",fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{cols:"12"}},[i("div",{staticStyle:{overflow:"hidden","max-height":"100%","min-height":"100%"}},[i("RectangleSVG")],1)])],1)],1)],1)},u=[],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{cols:"1"}},[i("v-container",{attrs:{"fill-height":"",fluid:"",id:"button-container"}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"primary",elevation:"8"},on:{click:function(e){t.mode="e"}}},"v-btn",s,!1),n),[t._v("ADD")])]}}])},[i("span",[t._v("You can also press E to add new points")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"teal",dark:"",elevation:"8"},on:{click:function(e){t.mode="o"}}},"v-btn",s,!1),n),[t._v("MOVE")])]}}])},[i("span",[t._v("You can also press O to move points around")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"error",elevation:"8"},on:{click:function(e){t.mode="p"}}},"v-btn",s,!1),n),[t._v("DELETE")])]}}])},[i("span",[t._v("You can also press P to delete points")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{staticClass:"justify-center",attrs:{cols:"12"}},[i("v-color-picker",{attrs:{"hide-mode-switch":"",mode:"hexa"},model:{value:t.lastColor,callback:function(e){t.lastColor=e},expression:"lastColor"}})],1),i("v-col",{attrs:{cols:"12"}},[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"cyan",elevation:"8",dark:""},on:{click:function(e){t.mode="c"}}},"v-btn",s,!1),n),[t._v("COLOR")])]}}])},[i("span",[t._v("You can also press C to color the rectangles")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",{attrs:{cols:"12"}},[i("v-text-field",{attrs:{label:"Width",outlined:"",dark:"",type:"number",dense:"","hide-details":""},model:{value:t.width,callback:function(e){t.width=e},expression:"width"}}),i("br"),i("v-text-field",{attrs:{label:"Height",outlined:"",dark:"",type:"number",dense:"","hide-details":""},model:{value:t.height,callback:function(e){t.height=e},expression:"height"}})],1),i("v-col",{attrs:{col:"12"}},[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"indigo",elevation:"8",dark:""},on:{click:function(e){return t.resizeRectangle()}}},"v-btn",s,!1),n),[t._v("RESIZE")])]}}])},[i("span",[t._v("You can also press R to resize")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"indigo",elevation:"8",dark:""},on:{click:function(e){return t.toggleStroke(t.hideStroke)}}},"v-btn",s,!1),n),[t._v("Stroke")])]}}])},[i("span",[t._v("You can also press H to toggle the strokes")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"success",elevation:"8"},on:{click:function(e){return t.downloadSVG()}}},"v-btn",s,!1),n),[t._v("SVG")])]}}])},[i("span",[t._v("You can also press D to download current SVG")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"success",elevation:"8"},on:{click:function(e){return t.downloadPNG()}}},"v-btn",s,!1),n),[t._v("PNG")])]}}])},[i("span",[t._v("You can also press F to download current PNG")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[i("v-btn",t._g(t._b({attrs:{block:"",depressed:"",large:"",color:"success",elevation:"8"},on:{click:function(e){return t.downloadPath()}}},"v-btn",s,!1),n),[t._v("PATH")])]}}])},[i("span",[t._v("You can also press G to download the path file")])])],1)],1),i("v-row",{attrs:{align:"center",justify:"center"}},[i("v-col",[i("v-file-input",{attrs:{label:"Path input",outlined:"",dense:"",dark:"",accept:".json"},on:{change:function(e){return t.loadPath(e)}}})],1)],1)],1)],1),i("v-col",{attrs:{cols:"11"}},[i("div",{staticStyle:{display:"block",margin:"auto",height:"99vh"}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",id:"svg"}})])])],1)],1)},g=[],_=i("3835"),p=(i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("e9c4"),i("4fad"),i("7444")),w=i.n(p),f={name:"RectangleSVG",data:function(){return{mouseStartPosition:{x:0,y:0},mousePosition:{x:0,y:0},viewboxStartPosition:{x:0,y:0},viewboxPosition:{x:0,y:0},viewboxSize:{x:0,y:0},viewboxScale:1,mouseDown:!1,mouseDownMove:!1,svg:null,rootRectangle:null,lastRectangle:null,mode:"e",hoverCircleID:-1,coord:{x:0,y:0},lastHoverRectangleID:-1,lastColor:"#00abff",width:-1,height:-1,hideStroke:!1}},created:function(){window.addEventListener("keypress",this.doCommand),window.addEventListener("resize",this.windowResize)},destroyed:function(){window.removeEventListener("keypress",this.doCommand),window.removeEventListener("resize",this.windowResize)},watch:{mode:function(t,e){"i"!=t&&(this.clearMode(e),"h"==e&&(this.hideStroke=!1,this.rootRectangle.hideStroke(!1)),this.enterMode(t))}},methods:{outsideRootRectangle:function(){return this.coord.x>=this.rootRectangle.width||this.coord.x<=0||this.coord.y<=0||this.coord.y>=this.rootRectangle.height},doCommand:function(t){var e=String.fromCharCode(t.keyCode).toLowerCase();"o"==e?"o"==this.mode?this.mode="e":this.mode="o":"p"==e?"p"==this.mode?this.mode="e":this.mode="p":"e"==e&&"e"!=this.mode?this.mode="e":"c"==e?"c"==this.mode?this.mode="e":this.mode="c":"r"==e?this.resizeRectangle():"d"==e?this.downloadSVG():"f"==e?this.downloadPNG():"g"==e?this.downloadPath():"h"==e&&(this.mode="h",this.hideStroke=!this.hideStroke,this.toggleStroke(this.hideStroke))},toggleStroke:function(t){this.rootRectangle.hideStroke(t)},getDim:function(){this.width=this.svg.clientWidth,this.height=this.svg.clientHeight},windowResize:function(){this.getDim(),this.viewboxSize={x:this.width,y:this.height},this.setviewbox()},setviewbox:function(){var t={x:0,y:0},e={x:0,y:0};t.x=this.viewboxPosition.x,t.y=this.viewboxPosition.y,e.x=this.viewboxSize.x*this.viewboxScale,e.y=this.viewboxSize.y*this.viewboxScale,this.svg.setAttribute("viewBox",t.x+" "+t.y+" "+e.x+" "+e.y)},clearMode:function(t){"p"==t?this.rootRectangle.removeDeletablePoints():"o"==t?this.rootRectangle.removeMovablePoints():"c"==t?-1!=this.lastHoverRectangleID&&(this.rootRectangle.changeColor(this.lastHoverRectangleID),this.lastHoverRectangleID=-1):"e"==t&&null!=this.lastRectangle&&(this.lastRectangle.removeChildren(),this.lastRectangle=null)},enterMode:function(t){"o"==t?this.rootRectangle.showMovablePoints():"p"==t?this.rootRectangle.showDeletablePoints():"e"==t?this.outsideRootRectangle()||(this.lastRectangle=this.rootRectangle.addPoint(this.coord.x,this.coord.y)):"c"==t&&(this.lastHoverRectangleID=this.rootRectangle.changeColorByPosition(this.coord.x,this.coord.y,this.lastColor))},mousedown:function(t){this.mouseStartPosition.x=t.pageX,this.mouseStartPosition.y=t.pageY,this.viewboxStartPosition.x=this.viewboxPosition.x,this.viewboxStartPosition.y=this.viewboxPosition.y,this.mouseDown=!0,this.svg.addEventListener("mouseup",this.mouseup),"p"==this.mode&&-1!=this.hoverCircleID&&(this.rootRectangle.deleteInnerPoint(this.hoverCircleID),this.hoverCircleID=-1)},mouseup:function(){this.mouseDown&&(this.mouseDown=!1,this.svg.removeEventListener("mouseup",this.mouseup),"e"==this.mode?this.mouseDownMove||null==this.lastRectangle?this.mouseDownMove?this.mouseDownMove=!1:null!=this.lastRectangle||this.outsideRootRectangle()||window.alert("Cannot click here, either you clicked on a point or a line or maximum layers achieved."):(this.lastRectangle=this.rootRectangle.addPoint(this.coord.x,this.coord.y,!0),null!=this.lastRectangle&&this.rootRectangle.incrementInnerPointCount(this.lastRectangle.id),this.lastRectangle=null):"c"==this.mode&&(this.mouseDownMove||-1==this.lastHoverRectangleID?this.mouseDownMove?this.mouseDownMove=!1:-1!=this.lastHoverRectangleID||this.outsideRootRectangle||window.alert("You are probably trying to click on an edge."):this.rootRectangle.changeColor(this.lastHoverRectangleID,this.lastColor,!0)))},mousemove:function(t){var e=this.svg.getScreenCTM();if(this.coord={x:(t.clientX-e.e)/e.a,y:(t.clientY-e.f)/e.d},this.mousePosition.x=t.offsetX,this.mousePosition.y=t.offsetY,this.mouseDown||"p"!=this.mode&&"o"!=this.mode||(t.target.classList.contains("draggable")?this.hoverCircleID=t.target.id:this.hoverCircleID=-1),this.mouseDown&&((Math.abs(t.movementX)>=5||Math.abs(t.movementY)>=5)&&(this.mouseDownMove=!0),-1==this.hoverCircleID?(this.viewboxPosition.x=this.viewboxStartPosition.x+(this.mouseStartPosition.x-t.pageX)*this.viewboxScale,this.viewboxPosition.y=this.viewboxStartPosition.y+(this.mouseStartPosition.y-t.pageY)*this.viewboxScale,this.setviewbox()):"o"==this.mode&&this.rootRectangle.moveInnerPoint(this.hoverCircleID,this.coord.x,this.coord.y)),"e"!=this.mode||this.outsideRootRectangle())"c"!=this.mode||this.outsideRootRectangle()?(this.outsideRootRectangle()&&"e"==this.mode||"c"==this.mode)&&this.clearMode(this.mode):t.target.getAttribute("true_id")!=this.lastHoverRectangleID&&(-1!=this.lastHoverRectangleID&&this.rootRectangle.changeColor(this.lastHoverRectangleID),this.lastHoverRectangleID=this.rootRectangle.changeColor(t.target.getAttribute("true_id"),this.lastColor));else{var i=this.lastRectangle;this.enterMode("e"),null!=i&&null!=this.lastRectangle?i.id!=this.lastRectangle.id&&i.removeChildren():null==this.lastRectangle&&null!=i&&i.removeChildren()}},wheel:function(t){var e=t.deltaY<0?.98:1.02;if(this.viewboxScale*e<20&&this.viewboxScale*e>.05){var i={x:this.mousePosition.x*this.viewboxScale,y:this.mousePosition.y*this.viewboxScale},n={x:this.viewboxPosition.x,y:this.viewboxPosition.y},s={x:i.x+n.x,y:i.y+n.y};this.viewboxPosition.x=(this.viewboxPosition.x-s.x)*e+s.x,this.viewboxPosition.y=(this.viewboxPosition.y-s.y)*e+s.y,this.viewboxScale*=e,this.setviewbox()}},mouseleave:function(){"c"!=this.mode&&"e"!=this.mode||this.clearMode(this.mode),this.coord={x:0,y:0}},resizeRectangle:function(){this.width<=0||this.height<=0?window.alert("SVG width and height must be positive"):(this.clearMode(this.mode),this.rootRectangle.resize(this.width,this.height,0,0),this.mode="i")},copySVG:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("width",this.rootRectangle.width),t.setAttribute("height",this.rootRectangle.height),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("id","svg_copy"),document.body.appendChild(t);for(var e=this.svg.getElementsByTagName("rect"),i=0;i<e.length;i++){var n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttributeNS(null,"x",e[i].getAttribute("x")),n.setAttributeNS(null,"y",e[i].getAttribute("y")),n.setAttributeNS(null,"width",e[i].getAttribute("width")),n.setAttributeNS(null,"height",e[i].getAttribute("height")),n.setAttributeNS(null,"style",e[i].getAttribute("style")),t.appendChild(n)}return t},downloadSVG:function(){this.clearMode(this.mode);var t=this.copySVG(),e=t.outerHTML,i=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download="draw-rectangles.svg",document.body.appendChild(s),s.click(),document.body.removeChild(s),document.body.removeChild(t),"o"!=this.mode&&"p"!=this.mode||this.enterMode(this.mode)},downloadPNG:function(){var t=this;this.clearMode(this.mode);var e=this.copySVG(),i=e.outerHTML,n=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(n),o=new Image,r=this;o.onload=function(){var i=document.createElement("canvas");i.width=r.rootRectangle.width,i.height=r.rootRectangle.height;var n=i.getContext("2d");n.drawImage(o,0,0,r.rootRectangle.width,r.rootRectangle.height);var s=i.toDataURL(),h=document.createElement("a");h.href=s,h.download="draw-rectangles.png",document.body.appendChild(h),h.click(),document.body.removeChild(h),document.body.removeChild(e),"o"!=t.mode&&"p"!=t.mode||t.enterMode(t.mode)},o.src=s},downloadPath:function(){var t=this.rootRectangle.exportPath(),e=JSON.stringify(t),i="data:application/json;charset=utf-8,"+encodeURIComponent(e),n="draw-rectangles-path.json",s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",n),s.click()},loadPath:function(t){if(t){this.mode="i";var e=new FileReader;e.onload=this.createRectangleFromPath,e.readAsText(t)}},createRectangleFromPath:function(t){var e=JSON.parse(t.target.result);if("draw-rectangles-path"!=e.type)return this.clearMode(this.mode),void(this.mode="i");while(this.svg.lastChild)this.svg.removeChild(this.svg.lastChild);this.width=e.width,this.height=e.height,this.rootRectangle=new w.a(this.svg,this.width,this.height,0,0,0);for(var i=0;i<e.points.length;i++){var n=e.points[i];this.lastRectangle=this.rootRectangle.addPoint(n.x,n.y,!0),null!=this.lastRectangle&&this.rootRectangle.incrementInnerPointCount(this.lastRectangle.id)}for(var s=0,o=Object.entries(e.colors);s<o.length;s++){var r=Object(_["a"])(o[s],2),h=r[0],l=r[1];this.rootRectangle.changeColor(h,l,!0)}this.lastRectangle=null,this.mode="i",this.hideStroke=!1}},mounted:function(){this.svg=document.getElementById("svg"),this.width=this.svg.clientWidth,this.height=this.svg.clientHeight,this.rootRectangle=new w.a(this.svg,this.width,this.height,0,0,0),this.viewboxSize.x=this.width,this.viewboxSize.y=this.height,this.svg.addEventListener("mousedown",this.mousedown),this.svg.addEventListener("mousemove",this.mousemove),this.svg.addEventListener("wheel",this.wheel),this.svg.addEventListener("mouseleave",this.mouseleave)}},m=f,y=(i("125c"),i("6544")),b=i.n(y),x=i("7496"),S=i("8336"),k=i("62ad"),R=i("03a4"),P=i("a523"),C=i("23a7"),A=i("0fd9"),M=i("8654"),N=i("3a2f"),D=Object(r["a"])(m,v,g,!1,null,"1be57d65",null),I=D.exports;b()(D,{VApp:x["a"],VBtn:S["a"],VCol:k["a"],VColorPicker:R["a"],VContainer:P["a"],VFileInput:C["a"],VRow:A["a"],VTextField:M["a"],VTooltip:N["a"]});var E={name:"Home",components:{RectangleSVG:I}},j=E,z=Object(r["a"])(j,d,u,!1,null,null,null),V=z.exports;b()(z,{VCol:k["a"],VContainer:P["a"],VRow:A["a"]}),n["a"].use(c["a"]);var O=[{path:"/",name:"Home",component:V}],H=new c["a"]({mode:"history",base:"/draw-rectangles-together/",routes:O}),L=H,G=i("2f62");n["a"].use(G["a"]);var B={state:{},mutations:{},actions:{},modules:{}},Y={state:{},mutations:{},actions:{},modules:{}},T=new G["a"].Store({modules:{draw:B,message:Y}}),F=i("f309");n["a"].use(F["a"]);var U=new F["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:L,store:T,vuetify:U,render:function(t){return t(a)}}).$mount("#app")},7444:function(t,e,i){var n=i("970b").default,s=i("5bc3").default,o=function(){"use strict";function t(e,i,s,o,r,h){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:10,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";n(this,t),this.svg=e,this.width=i,this.height=s,this.id=h,this.inner_point_x_percent=0,this.inner_point_y_percent=0,this.x_start=o,this.y_start=r,this.inner_point_count=0,this.color=a,this.stroke_width=l,this.rectangle_children=[null,null,null,null],this.rect=null,this.inner_point_move=null,this.inner_point_delete=null,this.drawSelf()}return s(t,[{key:"drawSelf",value:function(){if(this.width>0&&this.height>0){this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rect.setAttributeNS(null,"x",this.x_start),this.rect.setAttributeNS(null,"y",this.y_start),this.rect.setAttributeNS(null,"width",this.width),this.rect.setAttributeNS(null,"height",this.height),this.rect.setAttributeNS(null,"id","rec_"+this.id),this.rect.setAttributeNS(null,"true_id",this.id),this.rect.setAttributeNS(null,"style","fill: "+(""==this.color?"#ffffff":this.color)+";stroke-width: "+Math.ceil(this.stroke_width)+"; stroke: rgb(0, 0, 0);"),this.svg.appendChild(this.rect);for(var e=0;e<4;e++){var i=new t(this.svg,0,0,this.x_start,this.y_start,4*this.id+e+1,Math.max(this.stroke_width-.5,1),this.color);this.rectangle_children[e]=i}}}},{key:"hideStroke",value:function(t){if(null!=this.rect&&this.rect.setAttributeNS(null,"style","fill: "+(""==this.color?"#ffffff":this.color)+";"+(t?""==this.color||this.width<2||this.height<2||this.inner_point_count>0?"":"stroke-width: 2; stroke: "+this.color+";":"stroke-width: "+Math.ceil(this.stroke_width)+"; stroke: rgb(0, 0, 0);")),this.inner_point_count>0)for(var e=0;e<this.rectangle_children.length;e++)null!=this.rectangle_children[e]&&this.rectangle_children[e].hideStroke(t)}},{key:"resize",value:function(t,e,i,n){t>0&&e>0&&(this.width=t,this.height=e,this.x_start=i,this.y_start=n,null==this.rect&&(this.rect=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rect.setAttributeNS(null,"id","rec_"+this.id),this.rect.setAttributeNS(null,"style","fill: "+(""==this.color?"#ffffff":this.color)+";stroke-width: "+Math.ceil(this.stroke_width)+"; stroke: rgb(0, 0, 0);"),this.svg.appendChild(this.rect)),this.rect.setAttributeNS(null,"x",this.x_start),this.rect.setAttributeNS(null,"y",this.y_start),this.rect.setAttributeNS(null,"width",this.width),this.rect.setAttributeNS(null,"height",this.height),this.inner_point_count>0&&(this.rectangle_children[0].resize(t*this.inner_point_x_percent,e*this.inner_point_y_percent,this.x_start,this.y_start),this.rectangle_children[1].resize(t-t*this.inner_point_x_percent,e*this.inner_point_y_percent,this.x_start+t*this.inner_point_x_percent,this.y_start),this.rectangle_children[2].resize(t*this.inner_point_x_percent,e-e*this.inner_point_y_percent,this.x_start,this.y_start+e*this.inner_point_y_percent),this.rectangle_children[3].resize(t-t*this.inner_point_x_percent,e-e*this.inner_point_y_percent,this.x_start+t*this.inner_point_x_percent,this.y_start+e*this.inner_point_y_percent)))}},{key:"removeSelf",value:function(t){this.inner_point_move=null,this.inner_point_delete=null,null!=this.rect&&(document.getElementById("rec_"+this.id).remove(),this.width=0,this.height=0,this.rect=null,this.removeChildren()),this.color=t}},{key:"removeChildren",value:function(){this.inner_point_move=null,this.inner_point_delete=null;for(var t=0;t<this.rectangle_children.length;t++)null!=this.rectangle_children[t]&&this.rectangle_children[t].removeSelf(this.color);this.inner_point_count=0}},{key:"movePoint",value:function(t,e){t>this.x_start&&t<this.x_start+this.width&&e>this.y_start&&e<this.y_start+this.height&&(this.inner_point_x_percent=(t-this.x_start)/this.width,this.inner_point_y_percent=(e-this.y_start)/this.height,this.rectangle_children[0].resize(t-this.x_start,e-this.y_start,this.x_start,this.y_start),this.rectangle_children[1].resize(this.x_start+this.width-t,e-this.y_start,t,this.y_start),this.rectangle_children[2].resize(t-this.x_start,this.y_start+this.height-e,this.x_start,e),this.rectangle_children[3].resize(this.x_start+this.width-t,this.y_start+this.height-e,t,e))}},{key:"addPoint",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.id>=4503599627370496?null:e>this.x_start&&e<this.x_start+this.width&&i>this.y_start&&i<this.y_start+this.height?0==this.inner_point_count?(this.movePoint(e,i),n?(this.removeChildren(),this.rectangle_children[0]=new t(this.svg,e-this.x_start,i-this.y_start,this.x_start,this.y_start,4*this.id+0+1,Math.max(this.stroke_width-.5,1),this.color),this.rectangle_children[1]=new t(this.svg,this.x_start+this.width-e,i-this.y_start,e,this.y_start,4*this.id+1+1,Math.max(this.stroke_width-.5,1),this.color),this.rectangle_children[2]=new t(this.svg,e-this.x_start,this.y_start+this.height-i,this.x_start,i,4*this.id+2+1,Math.max(this.stroke_width-.5,1),this.color),this.rectangle_children[3]=new t(this.svg,this.x_start+this.width-e,this.y_start+this.height-i,e,i,4*this.id+3+1,Math.max(this.stroke_width-.5,1),this.color),this):this):e<this.x_start+this.width*this.inner_point_x_percent?i<this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[0].addPoint(e,i,n):i>this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[2].addPoint(e,i,n):null:e>this.x_start+this.width*this.inner_point_x_percent?i<this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[1].addPoint(e,i,n):i>this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[3].addPoint(e,i,n):null:null:null}},{key:"incrementInnerPointCount",value:function(e){var i=this;if(i.inner_point_count+=1,0!=e){var n=t.calculatePath(e),s=n.length-1;while(s>=0)i=i.rectangle_children[n[s]],s-=1,i.inner_point_count+=1}}},{key:"showMovablePoints",value:function(){if(this.inner_point_count>0){var t=this.x_start+this.inner_point_x_percent*this.width,e=this.y_start+this.inner_point_y_percent*this.height;if(null==this.inner_point_move){this.inner_point_move=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.inner_point_move.setAttributeNS(null,"r",Math.max(1,Math.ceil(1.5*Math.min(Math.min(this.width,this.height),this.stroke_width)))),this.inner_point_move.setAttributeNS(null,"class","draggable"),this.inner_point_move.setAttributeNS(null,"id",this.id),this.inner_point_move.setAttributeNS(null,"style","fill: #00ffac");var i=document.createElementNS("http://www.w3.org/2000/svg","animate");i.setAttribute("attributeName","opacity"),i.setAttribute("values","0;1;0"),i.setAttribute("dur","2s"),i.setAttribute("repeatCount","indefinite"),i.setAttribute("begin","0.1"),this.inner_point_move.appendChild(i)}this.inner_point_move.setAttributeNS(null,"cx",t),this.inner_point_move.setAttributeNS(null,"cy",e),this.svg.appendChild(this.inner_point_move);for(var n=0;n<this.rectangle_children.length;n++)this.rectangle_children[n].showMovablePoints()}}},{key:"moveMovablePoints",value:function(){if(this.inner_point_count>0){var t=this.x_start+this.inner_point_x_percent*this.width,e=this.y_start+this.inner_point_y_percent*this.height;this.inner_point_move.setAttributeNS(null,"cx",t),this.inner_point_move.setAttributeNS(null,"cy",e);for(var i=0;i<this.rectangle_children.length;i++)this.rectangle_children[i].moveMovablePoints()}}},{key:"removeMovablePoints",value:function(){if(this.inner_point_count>0){document.getElementById(this.id).remove();for(var t=0;t<this.rectangle_children.length;t++)null!=this.rectangle_children[t]&&this.rectangle_children[t].removeMovablePoints()}}},{key:"showDeletablePoints",value:function(){if(1==this.inner_point_count){var t=this.x_start+this.inner_point_x_percent*this.width,e=this.y_start+this.inner_point_y_percent*this.height;if(null==this.inner_point_delete){this.inner_point_delete=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.inner_point_delete.setAttributeNS(null,"class","draggable"),this.inner_point_delete.setAttributeNS(null,"id",this.id),this.inner_point_delete.setAttributeNS(null,"r",Math.max(1,Math.ceil(1.5*Math.min(Math.min(this.width,this.height),this.stroke_width)))),this.inner_point_delete.setAttributeNS(null,"style","fill: #ff0000");var i=document.createElementNS("http://www.w3.org/2000/svg","animate");i.setAttribute("attributeName","opacity"),i.setAttribute("values","0;1;0"),i.setAttribute("dur","2s"),i.setAttribute("repeatCount","indefinite"),i.setAttribute("begin","0.1"),this.inner_point_delete.appendChild(i)}this.inner_point_delete.setAttributeNS(null,"cx",t),this.inner_point_delete.setAttributeNS(null,"cy",e),this.svg.appendChild(this.inner_point_delete)}else if(this.inner_point_count>1)for(var n=0;n<this.rectangle_children.length;n++)this.rectangle_children[n].showDeletablePoints()}},{key:"removeDeletablePoints",value:function(){if(1==this.inner_point_count)document.getElementById(this.id).remove();else for(var t=0;t<this.rectangle_children.length;t++)null!=this.rectangle_children[t]&&this.rectangle_children[t].removeDeletablePoints()}},{key:"returnInnerRectangle",value:function(e){var i=t.calculatePath(e),n=i.length-1,s=this;while(n>=0)s=s.rectangle_children[i[n]],n-=1;return s}},{key:"moveInnerPoint",value:function(t,e,i){var n=this;0!=t&&(n=this.returnInnerRectangle(t)),n.movePoint(e,i),n.moveMovablePoints()}},{key:"deleteInnerPoint",value:function(e){var i=this;if(i.inner_point_count-=1,0!=e){var n=t.calculatePath(e),s=n.length-1;while(s>=0)i=i.rectangle_children[n[s]],s-=1,i.inner_point_count-=1}i.removeChildren(),document.getElementById(i.id).remove(),this.showDeletablePoints()}},{key:"changeColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this;if(0!=t&&(n=this.returnInnerRectangle(t)),n.inner_point_count>0)return-1;if(""!=e){if(i){n.color=e;for(var s=0;s<n.rectangle_children.length;s++)null!=n.rectangle_children[s]&&(n.rectangle_children[s].color=e)}n.rect.setAttributeNS(null,"style","fill: "+e+";stroke-width: "+Math.ceil(n.stroke_width)+"; stroke: rgb(0, 0, 0);")}else n.rect.setAttributeNS(null,"style","fill: "+(""==n.color?"#ffffff":n.color)+";stroke-width: "+Math.ceil(n.stroke_width)+"; stroke: rgb(0, 0, 0);");return n.id}},{key:"changeColorByPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t>this.x_start&&t<this.x_start+this.width&&e>this.y_start&&e<this.y_start+this.height){if(0==this.inner_point_count){if(""!=i){if(n){this.color=i;for(var s=0;s<this.rectangle_children.length;s++)null!=this.rectangle_children[s]&&(this.rectangle_children[s].color=i)}this.rect.setAttributeNS(null,"style","fill: "+i+";stroke-width: "+Math.ceil(this.stroke_width)+"; stroke: rgb(0, 0, 0);")}else this.rect.setAttributeNS(null,"style","fill: "+(""==this.color?"#ffffff":this.color)+";stroke-width: "+Math.ceil(this.stroke_width)+"; stroke: rgb(0, 0, 0);");return this.id}return t<this.x_start+this.width*this.inner_point_x_percent?e<this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[0].changeColorByPosition(t,e,i,n):e>this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[2].changeColorByPosition(t,e,i,n):-1:t>this.x_start+this.width*this.inner_point_x_percent?e<this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[1].changeColorByPosition(t,e,i,n):e>this.y_start+this.height*this.inner_point_y_percent?this.rectangle_children[3].changeColorByPosition(t,e,i,n):-1:-1}return-1}},{key:"exportPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==t&&(t={type:"draw-rectangles-path",width:this.width,height:this.height,points:[],colors:{}}),this.inner_point_count>0){t.points.push({x:this.x_start+this.inner_point_x_percent*this.width,y:this.y_start+this.inner_point_y_percent*this.height}),t.colors[this.id]=this.color;for(var e=0;e<this.rectangle_children.length;e++)null!=this.rectangle_children[e]&&(t=this.rectangle_children[e].exportPath(t))}else t.colors[this.id]=this.color;return t}}],[{key:"calculatePath",value:function(t){var e=[];while(t>4){t-=1;var i=t%4;e.push(i),t-=i,t/=4}return e.push(t-1),e}}]),t}();t.exports=o},"85ec":function(t,e,i){},"8f21":function(t,e,i){}});
//# sourceMappingURL=app.50536d7a.js.map